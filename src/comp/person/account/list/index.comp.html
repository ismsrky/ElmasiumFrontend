<ngx-loading [show]="busy"></ngx-loading>

<page-title [helpName]="'Wallets'" [icon]="'money'" [title]="'xWallets'"></page-title>
<person-account-list-criteria></person-account-list-criteria>

<div class="tile">
    <div class="row">
        <div class="col-2 mb-4">
            <button class="btn btn-primary btn-sm" type="submit" (click)="openModal(0)">
                <fa [name]="'plus'"></fa>{{'xNew' | translate}}
            </button>
        </div>
        <div class="col-10" *ngIf="profile.PersonTypeId == personTypes.xShop">
            <span class="float-right">
                <fa [name]="'barcode'"></fa> {{'xFastSale' | translate}}
            </span>
        </div>
    </div>
    <div class="row justify-content-center" *ngIf="newPersonAccountListDto.IsCrudOpen" [@expandCollapse]>
        <div class="col-xs-12">
            <person-account-crud #newPersonAccount [personAccountListDto]="newPersonAccountListDto"></person-account-crud>
        </div>
    </div>
    <div class="container-fluid p-2">
        <div class="row">
            <ng-container *ngFor="let account of accountList; let index = index">
                <div class="col-lg-4" [@expandCollapse]>
                    <person-account-list-item [listItem]="account"></person-account-list-item>
                </div>
                <div class="col-lg-12" *ngIf="account.IsCrudOpen" [@expandCollapse]>
                    <div class="row justify-content-center">
                        <div class="col-xs-12">
                            <person-account-crud #updatePersonAccount [personAccountListDto]="account"></person-account-crud>
                        </div>
                    </div>
                </div>
                <div class="col-12" *ngIf="account.IsActivitiesOpen" [@expandCollapse]>
                    <person-account-activity-list-index [IsInside]="true" [IsOpen]="account.IsActivitiesOpen"></person-account-activity-list-index>
                </div>
            </ng-container>
        </div>
    </div>
</div>